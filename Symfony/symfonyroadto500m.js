
<script>
    var stats = 
    {"updatedAt":1473429021,"packages":{"asset":{"releasedAt":"2015-02-10","total":521831,"perDay":1468.7666666667,"perSecond":0.016999614197531},"assetic-bundle":{"releasedAt":"2012-04-13","total":10837681,"perDay":12411.433333333,"perSecond":0.14365084876543},"browser-kit":{"releasedAt":"2012-04-13","total":10858047,"perDay":14601.633333333,"perSecond":0.16900038580247},"cache":{"releasedAt":"2016-01-19","total":59557,"perDay":597.76666666667,"perSecond":0.0069185956790123},"class-loader":{"releasedAt":"2012-04-13","total":5739243,"perDay":12869.133333333,"perSecond":0.14894830246914},"config":{"releasedAt":"2012-04-13","total":11212661,"perDay":21740.266666667,"perSecond":0.25162345679012},"console":{"releasedAt":"2012-04-13","total":30820079,"perDay":60099.466666667,"perSecond":0.69559567901235},"css-selector":{"releasedAt":"2012-04-13","total":17339176,"perDay":35570.7,"perSecond":0.41169791666667},"debug":{"releasedAt":"2013-04-07","total":19036543,"perDay":38284.633333333,"perSecond":0.44310918209877},"debug-bundle":{"releasedAt":"2014-09-26","total":35139,"perDay":151.1,"perSecond":0.0017488425925926},"dependency-injection":{"releasedAt":"2012-04-13","total":7985541,"perDay":16200.733333333,"perSecond":0.18750848765432},"doctrine-bridge":{"releasedAt":"2012-04-13","total":608248,"perDay":890.36666666667,"perSecond":0.010305169753086},"dom-crawler":{"releasedAt":"2012-04-13","total":17409904,"perDay":34771.133333333,"perSecond":0.40244367283951},"event-dispatcher":{"releasedAt":"2012-04-13","total":32647121,"perDay":60055.966666667,"perSecond":0.69509220679012},"expression-language":{"releasedAt":"2013-09-20","total":1137464,"perDay":2161.0666666667,"perSecond":0.025012345679012},"filesystem":{"releasedAt":"2012-04-13","total":19126958,"perDay":29001.166666667,"perSecond":0.33566165123457},"finder":{"releasedAt":"2012-04-13","total":24250487,"perDay":49171.5,"perSecond":0.56911458333333},"form":{"releasedAt":"2012-04-13","total":1471595,"perDay":1911.6333333333,"perSecond":0.022125385802469},"framework-bundle":{"releasedAt":"2012-04-13","total":1216304,"perDay":1492.3666666667,"perSecond":0.017272762345679},"framework-standard-edition":{"releasedAt":"2012-04-13","total":1045309,"perDay":569.83333333333,"perSecond":0.0065952932098765},"http-foundation":{"releasedAt":"2012-04-13","total":20881141,"perDay":40929.2,"perSecond":0.47371759259259},"http-kernel":{"releasedAt":"2012-04-13","total":19216046,"perDay":37525.033333333,"perSecond":0.4343175154321},"icu":{"releasedAt":"2013-03-09","total":4936580,"perDay":2478.2666666667,"perSecond":0.028683641975309},"inflector":{"releasedAt":"2016-03-31","total":119656,"perDay":1344.6333333333,"perSecond":0.015562885802469},"intl":{"releasedAt":"2013-04-22","total":1773249,"perDay":2714.8,"perSecond":0.031421296296296},"ldap":{"releasedAt":"2015-09-30","total":14178,"perDay":57.466666666667,"perSecond":0.00066512345679012},"locale":{"releasedAt":"2012-04-13","total":451519,"perDay":363.56666666667,"perSecond":0.0042079475308642},"monolog-bridge":{"releasedAt":"2012-04-13","total":890753,"perDay":1417.4666666667,"perSecond":0.016405864197531},"monolog-bundle":{"releasedAt":"2012-04-13","total":12712028,"perDay":18854.366666667,"perSecond":0.21822183641975},"options-resolver":{"releasedAt":"2012-05-16","total":2683458,"perDay":5620.9,"perSecond":0.065056712962963},"phpunit-bridge":{"releasedAt":"2015-02-21","total":1418552,"perDay":6968.6,"perSecond":0.080655092592593},"polyfill":{"releasedAt":"2015-11-04","total":22491,"perDay":123.23333333333,"perSecond":0.0014263117283951},"polyfill-apcu":{"releasedAt":"2016-01-14","total":2458075,"perDay":15006.5,"perSecond":0.17368634259259},"polyfill-iconv":{"releasedAt":"2015-10-25","total":305597,"perDay":2098,"perSecond":0.024282407407407},"polyfill-intl-grapheme":{"releasedAt":"2015-10-25","total":472,"perDay":1.6333333333333,"perSecond":1.8904320987654e-5},"polyfill-intl-icu":{"releasedAt":"2015-10-25","total":3009211,"perDay":14185.633333333,"perSecond":0.16418557098765},"polyfill-intl-normalizer":{"releasedAt":"2015-10-25","total":1700,"perDay":10.033333333333,"perSecond":0.00011612654320988},"polyfill-mbstring":{"releasedAt":"2015-10-25","total":13852723,"perDay":65893.833333333,"perSecond":0.76266010802469},"polyfill-php54":{"releasedAt":"2015-10-25","total":2949164,"perDay":12937.933333333,"perSecond":0.14974459876543},"polyfill-php55":{"releasedAt":"2015-10-25","total":2975061,"perDay":13304.966666667,"perSecond":0.15399266975309},"polyfill-php56":{"releasedAt":"2015-10-25","total":8211609,"perDay":37816.433333333,"perSecond":0.43769020061728},"polyfill-php70":{"releasedAt":"2015-10-25","total":3157833,"perDay":15225.4,"perSecond":0.17621990740741},"polyfill-util":{"releasedAt":"2015-10-25","total":8209372,"perDay":37755.466666667,"perSecond":0.43698456790123},"polyfill-xml":{"releasedAt":"2015-10-25","total":909,"perDay":2.4,"perSecond":2.7777777777778e-5},"process":{"releasedAt":"2012-04-13","total":23796626,"perDay":48393.9,"perSecond":0.56011458333333},"propel1-bridge":{"releasedAt":"2012-04-24","total":55343,"perDay":76.633333333333,"perSecond":0.00088695987654321},"property-access":{"releasedAt":"2013-01-14","total":2320772,"perDay":3920.8666666667,"perSecond":0.045380401234568},"property-info":{"releasedAt":"2015-09-26","total":12599,"perDay":100,"perSecond":0.0011574074074074},"proxy-manager-bridge":{"releasedAt":"2013-05-08","total":258582,"perDay":504.2,"perSecond":0.0058356481481481},"psr-http-message-bridge":{"releasedAt":"2015-05-29","total":399265,"perDay":2526.3333333333,"perSecond":0.029239969135802},"routing":{"releasedAt":"2012-04-13","total":18628145,"perDay":36224.7,"perSecond":0.41926736111111},"security":{"releasedAt":"2012-04-13","total":1583597,"perDay":1833.4666666667,"perSecond":0.021220679012346},"security-acl":{"releasedAt":"2013-09-18","total":2063171,"perDay":9148.5,"perSecond":0.10588541666667},"security-bundle":{"releasedAt":"2012-04-13","total":225016,"perDay":366,"perSecond":0.0042361111111111},"security-core":{"releasedAt":"2013-09-18","total":7198530,"perDay":5695.2333333333,"perSecond":0.065917052469136},"security-csrf":{"releasedAt":"2013-11-14","total":1210192,"perDay":1491.0333333333,"perSecond":0.017257330246914},"security-guard":{"releasedAt":"2015-09-24","total":3281,"perDay":14.133333333333,"perSecond":0.00016358024691358},"security-http":{"releasedAt":"2013-09-18","total":18134,"perDay":46.5,"perSecond":0.00053819444444444},"serializer":{"releasedAt":"2012-04-13","total":1452797,"perDay":4306.7333333333,"perSecond":0.049846450617284},"stopwatch":{"releasedAt":"2012-11-10","total":4463371,"perDay":8946.7,"perSecond":0.10354976851852},"swiftmailer-bridge":{"releasedAt":"2012-04-13","total":83903,"perDay":33.333333333333,"perSecond":0.0003858024691358},"swiftmailer-bundle":{"releasedAt":"2012-04-13","total":11526871,"perDay":16455.366666667,"perSecond":0.19045563271605},"symfony":{"releasedAt":"2012-04-13","total":14511690,"perDay":20860.766666667,"perSecond":0.24144405864198},"symfony-installer":{"releasedAt":"2014-10-16","total":1519,"perDay":1.0333333333333,"perSecond":1.195987654321e-5},"templating":{"releasedAt":"2012-04-13","total":1331373,"perDay":1627.5,"perSecond":0.018836805555556},"translation":{"releasedAt":"2012-04-13","total":21168881,"perDay":43315.433333333,"perSecond":0.50133603395062},"twig-bridge":{"releasedAt":"2012-04-13","total":1865739,"perDay":2628.6333333333,"perSecond":0.03042399691358},"twig-bundle":{"releasedAt":"2012-04-13","total":302231,"perDay":446.83333333333,"perSecond":0.0051716820987654},"validator":{"releasedAt":"2012-04-13","total":3480277,"perDay":6823.6666666667,"perSecond":0.07897762345679},"var-dumper":{"releasedAt":"2014-09-26","total":11770323,"perDay":33836.4,"perSecond":0.391625},"web-profiler-bundle":{"releasedAt":"2012-04-13","total":519044,"perDay":733.66666666667,"perSecond":0.008491512345679},"workflow":{"releasedAt":"2016-06-27","total":2498,"perDay":44.9,"perSecond":0.00051967592592593},"yaml":{"releasedAt":"2012-04-13","total":28609482,"perDay":59564.966666667,"perSecond":0.68940933641975}},"total":{"downloads":482473517,"perSecond":11.997961419753}};
    var numFormatter = window.Intl !== undefined
        ? new Intl.NumberFormat('en', { maximumFractionDigits: 0 })
        : { format: function (number) { return number.toFixed(0).toString().replace(/(.)(?=(\d{3})+$)/g, '$1,') } }
    ;

    var updatesPerSecond = 10;
    var milestone = 500000000;
    var secondsElapsedSinceStatsWereUpdated = getCurrentTimeStamp() - stats['updatedAt'];
    var downloads = stats['total']['downloads'] + secondsElapsedSinceStatsWereUpdated * stats['total']['perSecond'];

    if (downloads < milestone) {
        var downloadsToMilestone = milestone - downloads;
        var secondsToMilestone = downloadsToMilestone / stats['total']['perSecond'];
        var now = new Date();
        var milestoneDate = new Date(now.getTime() + secondsToMilestone * 1000);

        document.querySelector('#milestone #date').innerHTML = milestoneDate;
        document.getElementById('milestone').style.display = 'block';
    }

    window.setInterval(function(){ updateStats() }, 1000 / updatesPerSecond);

    // update the stats interpolating the historic data to simulate real-time
    function updateStats() {
        downloads += (stats['total']['perSecond'] / updatesPerSecond);
        document.getElementById('total').innerHTML = numFormatter.format(downloads);

        if (downloads > milestone) {
            document.getElementById('milestone').style.display = 'none';
            document.querySelector('body').classList.add('achieved');
        }
    }

    // This avoids displaying different stats when the local computer clock is not in sync
    function getCurrentTimeStamp()
    {
        var request = new XMLHttpRequest();
        request.open('GET', '/500million/timestamp', false); // false = sync request
        request.setRequestHeader('Content-Type', 'application/json');
        request.send();

        if (request.status === 200) {
            var response = JSON.parse(request.responseText);
            return response['now'];
        } else {
            return (Date.now() / 1000);
        }
    }
</script>